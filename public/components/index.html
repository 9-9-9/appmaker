<!doctype html>
<html>
  <head>
    <script type="text/javascript" src="jquery-1.9.1.js"></script>
    <script type="text/javascript" src="components.js"></script>

    <script type="text/javascript">
    $(document).ready(function () {
      Components.scan()
      Components.replace()
    })
    $(document).on('broadcast', function (event, message) {
      console.log(message)
    })
    </script>
  </head>
  <body>
    
    <style>
    .moz-button {
      background: blue;
      color: white;
      width: 200px;
    }
    .moz-counter {
      color: red;
    }
    </style>
    
    <template id="moz-shutter-button" broadcasts>
      <div style="" onclick="$(this).parent().trigger('broadcast', 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==')">[ o ]</div>
    </template>

    <template id="moz-picture-frame" ondblclick="$(this).find('img').attr('src', arguments[1])">
      <img style="width: 100px; height: 100px; border: 1px solid black;" />
    </template>
    
    <template id="moz-better-button" broadcasts>
      <div onclick="$(this).parent().trigger('broadcast')" style="">Click Me</div>
    </template>
    
    <template id="moz-counter" ondblclick="$(this).find('div').text(parseFloat($(this).text()) + 1)">
      <div style="width: 100px; height: 100px; font-size: 50px;">2</div>
    </template>
    
    <template id="moz-input-form">
      <input type="text">
      <button onclick="$(this).parent().trigger('broadcast', $(this).prev().val())">Submit</button>
    </template>
    
    <template id="moz-log" ondblclick="$(this).append(arguments[1] + '<br>')">
      <div></div>
    </template>
    
    <template id="moz-metronome" broadcasts>
      <div class="metro">Metronome</div>
      <script type="text/javascript">
        setInterval("$('.metro').parent().trigger('broadcast')", 1000)
      </script>
    </template>
    
    <template id="moz-camera">
      
      <script src="/components/camera-action.min.js"></script>
      <div onclick="camera.takePhoto()" id="moz-camera-instance" style="width: 320px; height: 240px;"></div>
      <script>
      var id = 'moz-camera-instance-' + new Date().getTime()
      $('#moz-camera-instance').attr('id', id)
      var container = document.querySelector('#' + id)
      var options = {
              'width': 320,
              'height': 240
          }
      var camera = new Camera(container, options)
      camera.action()
      camera.on('photo', function (data) {
        $(this).parent().trigger('broadcast', data)
      })
      </script>
    </template>
  
    <moz-picture-frame></moz-picture-frame>
    
    <moz-picture-frame></moz-picture-frame>
    
    <moz-picture-frame></moz-picture-frame>
    <moz-picture-frame></moz-picture-frame>
    
    <moz-counter listen-to="green"></moz-counter>
    
    <moz-better-button broadcast-to="green"></moz-better-button>
    
    <moz-shutter-button></moz-shutter-button>
    
    <moz-input-form></moz-input-form>
    

    
    <moz-log></log>
    
    
    
  </body>
</html>